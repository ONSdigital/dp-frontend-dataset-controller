{{$dims := .DatasetLandingPage.Dimensions}}
{{$language := .Language }}
{{$flexible := .DatasetLandingPage.IsFlexible}}
<section id="variables" aria-label="{{ localise "Variables" .Language 4}}">
    <h2 class="ons-u-mt-xl">{{ localise "Variables" .Language 4}}</h2>
    {{ if $flexible }}
    <form action="{{.DatasetLandingPage.FormAction}}" method="post">
    {{ end }}
    <table class="ons-table">
        <tbody class="ons-table__body">
            {{range $i, $dim := $dims}}
                <tr class="ons-table__row ons-u-bb ons-grid--flex@xxs@s ons-grid--between@xxs@s{{ if eq $i 0 }} ons-u-bt{{ end }}">
                    <th scope="col" class="ons-table__header ons-table__cell ons-col-4@s ons-u-pb-s ons-u-pt-s ons-u-pl-no ons-u-order--1 ons-u-bb-no@xxs@s {{if $flexible}}ons-u-flex--2@xxs@s{{end}}">
                        <span>{{ $dim.Title }}</span>
                    </th>
                    <td class="ons-table__cell ons-u-pb-s ons-u-pt-s ons-u-pl-no@xxs@s ons-u-order--3 ons-u-fw@xxs@s ons-u-pt-no@xxs@s ons-u-bb-no@xxs@s">
                        {{ if eq $dim.Title "Geography" }}
                            <div>
                                <div class="ons-u-pb-s">{{ localise "GeographyDimensionDescription" $language 1 }}</div>
                            </div>
                        {{else}}
                            <div>
                                {{ $length := len $dim.Values }}
                                {{ $length }}
                                {{ if gt $length 1 }}
                                    {{ localise "Category" $language 4 }}
                                {{else}}
                                    {{ localise "Category" $language 1 }}
                                {{end}}
                            </div>
                            <div class="ons-u-mt-s ons-u-fs-s ons-list--container">
                                <ul class="ons-list--truncated ons-u-m-no">
                                    {{ range $j, $val := $dim.Values}}
                                        <li class="ons-list__item">{{ $val }}</li>
                                    {{ end }}
                                </ul>
                            </div>
                        {{end}}
                    </td>
                    {{ if $flexible }}
                    <td class="ons-table__cell ons-u-pb-s ons-u-pt-s ons-u-ta-right ons-u-pl-no@xxs@s ons-u-ml-xs@xxs@s ons-u-order--2 ons-u-bb-no@xxs@s">
                        <button type="submit" class="ons-btn ons-btn__btn--link" name="dimension" value="{{ $dim.Title }}" role="link">
                            {{ localise "Change" $language 1 }} 
                            <span class="ons-u-vh">{{ localise "Variables" $language 1 }} {{ $dim.Title }}</span>
                        </button>
                    </td>
                    {{ end }}
                </tr>
            {{ end }}
        </tbody>
    </table>
    {{ if $flexible }}
    </form>
    {{ end }}
</section>
