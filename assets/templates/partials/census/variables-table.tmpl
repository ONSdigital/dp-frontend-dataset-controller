{{$dims := .DatasetLandingPage.Dimensions}}
{{$language := .Language }}
{{$flexible := .DatasetLandingPage.IsFlexible}}
<section id="variables" aria-label="{{ localise "Variables" .Language 4}}">
    <h2 class="ons-u-mt-xl">{{ localise "Variables" .Language 4}}</h2>
    {{ if $flexible }}
        <form action="{{.DatasetLandingPage.FormAction}}" method="post">
        {{ end }}
        <table class="ons-table">
            <tbody class="ons-table__body">
                {{range $i, $dim := $dims}}
                    <tr class="ons-table__row ons-u-bb ons-grid--flex@xxs@s ons-grid--between@xxs@s{{ if eq $i 0 }} ons-u-bt{{ end }}" id="{{- .ID -}}">
                        <th
                            scope="col"
                            class="ons-table__header ons-table__cell ons-col-4@s ons-u-pb-s ons-u-pt-s ons-u-pl-no ons-u-order--1 ons-u-bb-no@xxs@s
                                {{if $flexible}}ons-u-flex--2@xxs@s{{end}}">
                            <span>
                                {{ if $dim.IsAreaType }}
                                    {{- localise "AreaTypeDescription" $language 1 -}}
                                {{ else if $dim.IsCoverage }}
                                    {{- localise "AreaTypeCoverageTitle" $language 1 -}}
                                {{ else }}
                                    {{ $dim.Title }}
                                {{ end }}
                            </span>
                        </th>
                        <td class="ons-table__cell ons-u-pb-s ons-u-pt-s ons-u-pl-no@xxs@s ons-u-order--3 ons-u-fw@xxs@s ons-u-pt-no@xxs@s
                                ons-u-bb-no@xxs@s">
                            {{ if or ($dim.IsAreaType) ($dim.IsCoverage) }}
                                <div>
                                    {{ if $dim.IsCoverage }}
                                        {{- localise "AreaTypeDefaultCoverage" $language 1 -}}
                                    {{ else }}
                                        {{- $dim.Title }} ({{ $dim.TotalItems -}})
                                    {{ end }}
                                </div>
                            {{else}}
                                {{ $strOptCount := intToString $dim.TotalItems }}
                                <div>
                                    {{ $dim.TotalItems }}
                                    {{ if gt $dim.TotalItems 1 }}
                                        {{ localise "Category" $language 4 }}
                                    {{else}}
                                        {{ localise "Category" $language 1 }}
                                    {{end}}
                                </div>
                                <div class="ons-u-mt-s ons-u-fs-s ons-list--container">
                                    <ul class="ons-list{{ if $dim.IsTruncated }}--truncated{{end}}{{ if or (gt $dim.TotalItems 9) ($dim.IsTruncated) }}
                                            ons-u-mb-xs{{else}} ons-u-m-no{{end}}">
                                        {{ range $j, $val := $dim.Values}}
                                            <li class="ons-list__item{{ if $dim.IsTruncated }}--truncated{{end}} ons-u-mb-no">
                                                {{- $val -}}
                                            </li>
                                        {{ end }}
                                    </ul>
                                    {{ if $dim.IsTruncated }}
                                        <a href="{{$dim.TruncateLink}}">{{- localise "TruncateShowAll" $language 1 $strOptCount -}}</a>
                                    {{ else if gt $dim.TotalItems 9 }}
                                        <a href="{{.TruncateLink}}">{{- localise "TruncateShowFewer" $language 1 -}}</a>
                                    {{ end }}
                                </div>
                            {{end}}
                        </td>
                        <td class="ons-table__cell ons-u-pb-s ons-u-pt-s ons-u-ta-right ons-u-pl-no@xxs@s ons-u-ml-xs@xxs@s ons-u-order--2
                                ons-u-bb-no@xxs@s">
                            {{ if $dim.ShowChange }}
                                <button type="submit" class="ons-btn ons-btn__btn--link" name="dimension" value="{{ $dim.Name }}" role="link">
                                    {{ localise "Change" $language 1 }}
                                    <span class="ons-u-vh">{{ localise "Variables" $language 1 }}
                                        {{ $dim.Title }}
                                    </span>
                                </button>
                            {{ end }}
                        </td>
                    </tr>
                {{ end }}
            </tbody>
        </table>
        {{ if $flexible }}
        </form>
    {{ end }}
    {{ template "partials/census/back-to-contents" . }}
</section>
